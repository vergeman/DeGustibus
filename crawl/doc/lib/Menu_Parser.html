<head>
<!-- Generated by perlmod2www.pl -->
<title>
Menu_Parser documentation.
</title>
<link rel="stylesheet" type="text/css" href="../perl.css">
</head>
<body bgcolor="white">
<span id="modRootPath">crawl</span>
<span id="modName">Menu_Parser</span>
<div id="sep"></div>
<a name="TOP" id="TOP"></a>
<table id="daArea" width="100%"><tr><td id="daEntry" ><a href="#SUMMARY">Summary</a></td><td id="daEntry" ><a href="#vardefs">Package variables</a></td><td id="daEntry" ><a href="#SYNOPSIS">Synopsis</a></td><td id="daEntry" ><a href="#DESCRIPTION">Description</a></td><td id="daEntry" ><a href="#General">General documentation</a></td><td id="daEntry" ><a href="#Methods">Methods</a></td></tr></table>
<div id="sep"></div>
<div id="descTitle">Summary</div>
<div id="descArea">Menu_Parser.pm</div>
<div id="sep"></div>
<a name="vardefs" id="vardefs"></a><div id="descTitle">Package variables</div>
<div id="descArea"><div id="libEntry"><div id="descSubTitle">Privates (from <b>"my"</b> definitions)</div>
</div>
<div id="libEntry"><span id="var">@option_group_stack</span>;</div>
<div id="libEntry"><span id="var">$in_intset</span>;</div>
<div id="libEntry"><span id="var">@option_stack</span>;</div>
<div id="libEntry"><span id="var">@element_stack</span>;</div>
<div id="libEntry"><span id="var">$item_id</span>;</div>
<div id="libEntry"><span id="var">$hs</span>;</div>
<div id="libEntry"><span id="var">$rest_id</span>;</div>
<div id="libEntry"><span id="var">@tag_stack</span>;</div>
<div id="libEntry"><span id="var">@menu_stack</span>;</div>
<div id="libEntry"><span id="var">@menu_desc_stack</span>;</div>
<div id="libEntry"><span id="var">@item_stack</span>;</div>
</div>
<div id="sep"></div>
<div id="descTitle">Included modules</div>
<div id="descArea"><div id="libEntry"><span id="use">DBI</span></div>
<div id="libEntry"><span id="use">Data::Dumper</span> </div>
<div id="libEntry"><span id="use">HTML::Entities</span> </div>
<div id="libEntry"><span id="use">HTML::Strip</span> </div>
<div id="libEntry"><span id="use">XML::Parser::PerlSAX</span> </div>
</div>
<div id="sep"></div>
<a name="SYNOPSIS" id="SYNOPSIS"></a>
<div id="descTitle">Synopsis</div>
<div id="descArea">Menu_Parser.pm contains a Parse() runtime, and several hooks for a SAX Parser (XML::PerlSAX implementation.) Using each downloaded menu,<br />the data is parsed, and respective elemenets are imported into a mysql database accordingly.
</div>
<div id="sep"></div>
<a name="DESCRIPTION" id="DESCRIPTION"></a>
<div id="descTitle">Description</div>
<div id="descArea"><B>Menu_Parser</B> Parse() subroutine takes a menu and parses the XML, located specific elements of interest (food name, price, description, etc.)<br />and send it to a mysql database.  Several global variables are maintained to deal with nested XML elements and to record the order of elements<br />in the parse tree.  Additionally, HTML specific entities are removed and the string cleaned.
</div>
<div id="sep"></div>
<a name="Methods" id="Methods"></a>
<div id="descTitle">Methods</div>
<table id="methIndArea" width="100%" cellspacing="0"><tr><td id="methIndEntry">Parse</td><td id="methIndEntry"><a href="#POD1">Description</a></td><td id="methIndEntry"><a href="#CODE1">Code</a></td></tr>
<tr><td id="methIndEntry">characters</td><td id="methIndEntry"><a href="#POD2">Description</a></td><td id="methIndEntry"><a href="#CODE2">Code</a></td></tr>
<tr><td id="methIndEntry">checkDB</td><td id="methIndEntry"><a href="#POD3">Description</a></td><td id="methIndEntry"><a href="#CODE3">Code</a></td></tr>
<tr><td id="methIndEntry">clean</td><td id="methIndEntry"><a href="#POD4">Description</a></td><td id="methIndEntry"><a href="#CODE4">Code</a></td></tr>
<tr><td id="methIndEntry">comment</td><td id="methIndEntry"><a href="#POD5">Description</a></td><td id="methIndEntry"><a href="#CODE5">Code</a></td></tr>
<tr><td id="methIndEntry">end_element</td><td id="methIndEntry"><a href="#POD6">Description</a></td><td id="methIndEntry"><a href="#CODE6">Code</a></td></tr>
<tr><td id="methIndEntry">entity_reference</td><td id="methIndEntry"><a href="#POD7">Description</a></td><td id="methIndEntry"><a href="#CODE7">Code</a></td></tr>
<tr><td id="methIndEntry">new</td><td id="methIndEntry"><a href="#POD8">Description</a></td><td id="methIndEntry"><a href="#CODE8">Code</a></td></tr>
<tr><td id="methIndEntry">output</td><td id="methIndEntry"><a href="#POD9">Description</a></td><td id="methIndEntry"><a href="#CODE9">Code</a></td></tr>
<tr><td id="methIndEntry">processing_instruction</td><td id="methIndEntry"><a href="#POD10">Description</a></td><td id="methIndEntry"><a href="#CODE10">Code</a></td></tr>
<tr><td id="methIndEntry">stack_contains</td><td id="methIndEntry"><a href="#POD11">Description</a></td><td id="methIndEntry"><a href="#CODE11">Code</a></td></tr>
<tr><td id="methIndEntry">stack_top</td><td id="methIndEntry"><a href="#POD12">Description</a></td><td id="methIndEntry"><a href="#CODE12">Code</a></td></tr>
<tr><td id="methIndEntry">start_element</td><td id="methIndEntry"><a href="#POD13">Description</a></td><td id="methIndEntry"><a href="#CODE13">Code</a></td></tr>
</table>
<div id="sep"></div>
<a name="MethDesc" id="MethDesc"></a>
<div id="mainTitle">Methods description</div>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_Parse(2)" id="_pod_Parse(2)"></a><a name="POD1" id="POD1"></a>Parse(2)</td><td ><a href="#CODE1">code</a></td><td >&nbsp;&nbsp;&nbsp;&nbsp;</td><td ><a href="#POD2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>Parse: the main subroutine to be called in order to parse a menu<br />will determine the item_id by looking at the maximum id already<br />in the database.</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_characters(2)" id="_pod_characters(2)"></a><a name="POD2" id="POD2"></a>characters(2)</td><td ><a href="#CODE2">code</a></td><td ><a href="#POD1">prev</a></td><td ><a href="#POD3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>characters: handle a character data event</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_checkDB(2)" id="_pod_checkDB(2)"></a><a name="POD3" id="POD3"></a>checkDB(2)</td><td ><a href="#CODE3">code</a></td><td ><a href="#POD2">prev</a></td><td ><a href="#POD4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>checkDB: returns any error message from inserting into db</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_clean(2)" id="_pod_clean(2)"></a><a name="POD4" id="POD4"></a>clean(2)</td><td ><a href="#CODE4">code</a></td><td ><a href="#POD3">prev</a></td><td ><a href="#POD5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>clean: provides whitespace removal</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_comment(2)" id="_pod_comment(2)"></a><a name="POD5" id="POD5"></a>comment(2)</td><td ><a href="#CODE5">code</a></td><td ><a href="#POD4">prev</a></td><td ><a href="#POD6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>comment: handle a comment event: turn into a &lt;comment&gt; element</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_end_element(2)" id="_pod_end_element(2)"></a><a name="POD6" id="POD6"></a>end_element(2)</td><td ><a href="#CODE6">code</a></td><td ><a href="#POD5">prev</a></td><td ><a href="#POD7">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>end_element: handle an end-of-element event: <br />output end tag UNLESS it's from a &lt;literal&gt; inside a &lt;programlisting&gt;</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_entity_reference(2)" id="_pod_entity_reference(2)"></a><a name="POD7" id="POD7"></a>entity_reference(2)</td><td ><a href="#CODE7">code</a></td><td ><a href="#POD6">prev</a></td><td ><a href="#POD8">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>entity_reference: handle internal entity reference (we don't want them resolved)</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_new(2)" id="_pod_new(2)"></a><a name="POD8" id="POD8"></a>new(2)</td><td ><a href="#CODE8">code</a></td><td ><a href="#POD7">prev</a></td><td ><a href="#POD9">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>new: initializes the handler for the SAX Parser</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_output(2)" id="_pod_output(2)"></a><a name="POD9" id="POD9"></a>output(2)</td><td ><a href="#CODE9">code</a></td><td ><a href="#POD8">prev</a></td><td ><a href="#POD10">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>output: prints string</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_processing_instruction(2)" id="_pod_processing_instruction(2)"></a><a name="POD10" id="POD10"></a>processing_instruction(2)</td><td ><a href="#CODE10">code</a></td><td ><a href="#POD9">prev</a></td><td ><a href="#POD11">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>processing_instruction: handle a PI event: delete it</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_stack_contains(2)" id="_pod_stack_contains(2)"></a><a name="POD11" id="POD11"></a>stack_contains(2)</td><td ><a href="#CODE11">code</a></td><td ><a href="#POD10">prev</a></td><td ><a href="#POD12">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>stack_contains: takes a look at internals of stack</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_stack_top(2)" id="_pod_stack_top(2)"></a><a name="POD12" id="POD12"></a>stack_top(2)</td><td ><a href="#CODE12">code</a></td><td ><a href="#POD11">prev</a></td><td ><a href="#POD13">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>stack_top: provides peek on what's top of the stack</td></tr></table>
<div id="sep"></div>
<table id="methDescTitle" width="100%"><tr><td WIDTH="200"><a name="_pod_start_element(2)" id="_pod_start_element(2)"></a><a name="POD13" id="POD13"></a>start_element(2)</td><td ><a href="#CODE13">code</a></td><td ><a href="#POD12">prev</a></td><td ><a href="#POD14">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<table id="methDescArea" width="100%"><tr><td>start_element: handle a start-of-element event: output start tag and attributes</td></tr></table>
<div id="sep"></div>
<a name="MethCode" id="MethCode"></a>
<div id="mainTitle">Methods code</div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE1" id="CODE1"></a>Parse</td><td ><a href="#POD1">description</a></td><td >prev</td><td ><a href="#CODE2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">Parse</span>
{<pre>
    <span id="comment">#my $rest_id = $ARGV[0];</span><br />    <span id="var">$rest_id</span> = <span id="perlFunc">shift</span>;
    <span id="var">$rest_id</span> =~ <span id="regExp">s/\D+//g</span>;

    <span id="perlKey">my</span> <span id="var">$parser</span> = <span id="module">XML::Parser::PerlSAX</span>-&gt;<span id="perlKey">new</span><span id="braces">(</span> Handler =&gt; <span id="method">Menu_Parser</span><span id="method">->new</span><span id="braces">(</span> <span id="braces">)</span> <span id="braces">)</span>;

<span id="comment">#==DB SETUP==</span><br /><span id="comment">#open connection to db</span><br />    <span id="perlKey">my</span> <span id="var">$dbh</span> = <span id="method">DBI</span><span id="method">->connect</span><span id="braces">(</span><span id="sqStr">'DBI:mysql:foodie'</span>, <span id="sqStr">'foodie'</span>, <span id="sqStr">'foodie82'</span><span id="braces">)</span>
    or <span id="perlFunc">die</span> <span id="dqStr">"Couldn't connect to database: "</span> . DBI-&gt;errstr;

<span id="comment">#=max ID;</span><br />    <span id="comment">#my $item_id;</span><br />    <span id="perlKey">my</span> <span id="var">$sql_max</span> = <span id="dqStr">"SELECT MAX(food_items.item_id) FROM food_items"</span>;
    <span id="perlKey">my</span> <span id="var">$select_max</span> = <span id="var">$dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="var">$sql_max</span><span id="braces">)</span> or <span id="perlFunc">die</span> <span id="dqStr">"Error preparing query sql_max\n"</span>;

<span id="comment">#execute</span><br />    <span id="perlKey">my</span> <span id="var">$maxv</span> = <span id="var">$select_max</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">@item_num</span> = <span id="var">$select_max</span>-&gt;<span id="method">fetchrow_array</span><span id="braces">(</span><span id="braces">)</span>;
    <span id="var">$item_id</span> = <span id="var">$item_num</span><span id="braces">[</span>0<span id="braces">]</span>;

<span id="comment">#finish</span><br />    <span id="var">$select_max</span>-&gt;<span id="method">finish</span>;
    <span id="perlKey">if</span> <span id="braces">(</span><span id="perlKey">not</span> <span id="perlFunc">defined</span> <span id="var">$item_id</span><span id="braces">)</span> <span id="braces">{</span>
	<span id="var">$item_id</span>=1;
    <span id="braces">}</span>

<span id="comment">#SQL INSERT</span><br /><span id="comment">#build query string</span><br />    <span id="perlKey">my</span> <span id="var">$sql</span> = <span id="dqStr">"INSERT INTO food_items VALUES( ?, ?, ?, ?, ?)"</span>;
    <span id="perlKey">my</span> <span id="var">$sql_cat</span> = <span id="dqStr">"INSERT INTO categories VALUES(?, ?, ?)"</span>;
<span id="comment">#prepare statement w/ placeholders</span><br />    <span id="perlKey">my</span> <span id="var">$insert</span> = <span id="var">$dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="var">$sql</span><span id="braces">)</span> or <span id="perlFunc">die</span> <span id="dqStr">"Error preparing query\n"</span>;
    <span id="perlKey">my</span> <span id="var">$insert_cat</span> = <span id="var">$dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="var">$sql_cat</span><span id="braces">)</span> or <span id="perlFunc">die</span> <span id="dqStr">"Error preparing query sql_cat\n"</span>;


<span id="comment">#SQL INSERT (OPTIONS)</span><br /><span id="comment">#build query string</span><br />    <span id="perlKey">my</span> <span id="var">$sql_options</span> = <span id="dqStr">"INSERT INTO food_options VALUES(?, ?, ?, ?)"</span>;
<span id="comment">#prepare statement w/ placeholders</span><br />    <span id="perlKey">my</span> <span id="var">$insert_options</span> = <span id="var">$dbh</span>-&gt;<span id="method">prepare</span><span id="braces">(</span><span id="var">$sql_options</span><span id="braces">)</span> or <span id="perlFunc">die</span> <span id="dqStr">"Error preparing query sql_options\n"</span>;


<span id="comment">#HTML STripper</span><br />    <span id="comment">#my $hs = HTML::Strip-&gt;new();</span><br />    <span id="var">$hs</span> = <span id="module">HTML::Strip</span>-&gt;<span id="perlKey">new</span><span id="braces">(</span><span id="braces">)</span>;

<span id="comment">#PARSING EXEC</span><br />    <span id="perlKey">if</span><span id="braces">(</span> <span id="perlKey">my</span> <span id="var">$file</span> = <span id="perlFunc">shift</span> <span id="var">@ARGV</span> <span id="braces">)</span> <span id="braces">{</span>
	<span id="var">$parser</span>-&gt;<span id="method">parse</span><span id="braces">(</span> Source =&gt; <span id="braces">{</span>SystemId =&gt; <span id="var">$file</span><span id="braces">}</span> <span id="braces">)</span>;
    <span id="braces">}</span> <span id="perlKey">else</span> <span id="braces">{</span>
	<span id="perlKey">my</span> <span id="var">$input</span> = <span id="dqStr">""</span>;
	<span id="perlKey">while</span><span id="braces">(</span> &lt;STDIN&gt; <span id="braces">)</span> <span id="braces">{</span> <span id="var">$input</span> .= <span id="var">$_</span>; <span id="braces">}</span>
	<span id="var">$parser</span>-&gt;<span id="method">parse</span><span id="braces">(</span> Source =&gt; <span id="braces">{</span>String =&gt; <span id="var">$input</span><span id="braces">}</span> <span id="braces">)</span>;
    <span id="braces">}</span>

<span id="comment">#close DB</span><br />    <span id="var">$dbh</span>-&gt;<span id="method">disconnect</span>;

    <span id="perlFunc">print</span> <span id="dqStr">"DONE\n"</span>;
    <span id="perlKey">exit</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE2" id="CODE2"></a>characters</td><td ><a href="#POD2">description</a></td><td ><a href="#CODE1">prev</a></td><td ><a href="#CODE3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">characters</span>
{<pre>    <span id="perlKey">my</span><span id="braces">(</span> <span id="var">$self</span>, <span id="var">$properties</span> <span id="braces">)</span> = <span id="var">@_</span>;
    <span id="comment"># parser unfortunately resolves some character entities for us,</span><br />    <span id="comment"># so we need to replace them with entity references again</span><br />    <span id="perlKey">my</span> <span id="var">$data</span> = <span id="var">$properties</span>-&gt;<span id="braces">{</span><span id="sqStr">'Data'</span><span id="braces">}</span>;
    <span id="var">$data</span> =~ <span id="regExp">s/\&amp;/\&amp;/</span>;
    <span id="var">$data</span> =~ <span id="regExp">s/&lt;/\&amp;lt;/</span>;
    <span id="var">$data</span> =~ <span id="regExp">s/&gt;/\&amp;gt;/</span>;

    <span id="method">output</span><span id="braces">(</span> <span id="var">$data</span> <span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE3" id="CODE3"></a>checkDB</td><td ><a href="#POD3">description</a></td><td ><a href="#CODE2">prev</a></td><td ><a href="#CODE4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">checkDB</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$rv</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">$id</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">$desc</span> = <span id="perlFunc">shift</span>;

    <span id="perlKey">if</span><span id="braces">(</span><span id="var">$rv</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="comment">#print &quot;successful insert $id : $desc\n&quot;;</span><br />    <span id="braces">}</span>
    <span id="perlKey">else</span> <span id="braces">{</span>
        <span id="perlFunc">print</span> <span id="dqStr">"error inserting <span id="var">$id</span> : $desc\n"</span>;
    <span id="braces">}</span></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE4" id="CODE4"></a>clean</td><td ><a href="#POD4">description</a></td><td ><a href="#CODE3">prev</a></td><td ><a href="#CODE5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">clean</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$str</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">if</span> <span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$str</span><span id="braces">)</span> <span id="braces">{</span>

        <span id="var">$str</span> =~ <span id="regExp">s/^\s+//</span>;
        <span id="var">$str</span> =~ <span id="regExp">s/\s+$//</span>;

        <span id="perlKey">return</span> <span id="var">$str</span>;
    <span id="braces">}</span>
    <span id="perlKey">return</span> <span id="dqStr">""</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE5" id="CODE5"></a>comment</td><td ><a href="#POD5">description</a></td><td ><a href="#CODE4">prev</a></td><td ><a href="#CODE6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">comment</span>
{<pre>    <span id="perlKey">my</span><span id="braces">(</span> <span id="var">$self</span>, <span id="var">$properties</span> <span id="braces">)</span> = <span id="var">@_</span>;
    <span id="comment">#output( &quot;&lt;comment&gt;&quot; . $properties-&gt;{'Data'} . &quot;&lt;/comment&gt;&quot; );</span><br /></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE6" id="CODE6"></a>end_element</td><td ><a href="#POD6">description</a></td><td ><a href="#CODE5">prev</a></td><td ><a href="#CODE7">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">end_element</span>
{<pre>    <span id="perlKey">my</span><span id="braces">(</span> <span id="var">$self</span>, <span id="var">$properties</span> <span id="braces">)</span> = <span id="var">@_</span>;

    <span id="comment">#TAGS</span><br />    <span id="perlKey">my</span> <span id="var">%tag</span> = %<span id="braces">{</span><span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@tag_stack</span><span id="braces">)</span><span id="braces">}</span>;

    <span id="comment">#MENU</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"menu"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@menu_stack</span><span id="braces">)</span>;
        <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@menu_desc_stack</span><span id="braces">)</span>;
    <span id="braces">}</span>

    <span id="comment">#ITEM</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"item"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlKey">my</span> <span id="var">$item_attr</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@item_stack</span><span id="braces">)</span>;

        <span id="comment">#print &quot;@menu_stack : &quot;;</span><br />        <span id="comment">#print &quot;$item_id : $rest_id :  $item_attr-&gt;{name} &quot;;</span><br />        <span id="comment">#print &quot;@menu_desc_stack&quot;;</span><br />
        <span id="comment">#BUILD VARS</span><br />        <span id="perlKey">my</span> <span id="var">$name</span> = <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>name<span id="braces">}</span>;
        <span id="perlKey">my</span> <span id="var">$description</span> = <span id="dqStr">""</span>;
        <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>description<span id="braces">}</span><span id="braces">)</span> <span id="braces">{</span>
            <span id="var">$description</span> = <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>description<span id="braces">}</span>;
        <span id="braces">}</span>
        <span id="perlKey">my</span> <span id="var">$price</span>;
        <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>price<span id="braces">}</span><span id="braces">)</span> <span id="braces">{</span>
            <span id="var">$price</span> = <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>price<span id="braces">}</span>;
        <span id="braces">}</span>
        <span id="perlKey">elsif</span> <span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>price_range_low<span id="braces">}</span><span id="braces">)</span> <span id="braces">{</span>
            <span id="var">$price</span> = <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>price_range_low<span id="braces">}</span>;
        <span id="braces">}</span>
        <span id="perlKey">else</span> <span id="braces">{</span>
            <span id="var">$price</span> = <span id="var">$item_attr</span>-&gt;<span id="braces">{</span>price_range_high<span id="braces">}</span>;
        <span id="braces">}</span>


        <span id="comment">#build category string</span><br />        <span id="comment">#we'll use --- as a delimiter</span><br />        <span id="perlKey">my</span> <span id="var">$menu_str</span> = <span id="dqStr">""</span>;
        <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$m</span> <span id="braces">(</span><span id="var">@menu_stack</span><span id="braces">)</span> <span id="braces">{</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$m</span> <span id="perlKey">ne</span> <span id="dqStr">""</span><span id="braces">)</span> <span id="braces">{</span>
                <span id="var">$menu_str</span> .= <span id="var">$m</span>;
            <span id="braces">}</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$m</span> <span id="perlKey">ne</span> <span id="dqStr">""</span> &amp;&amp; <span id="var">$m</span> <span id="perlKey">ne</span> <span id="var">$menu_stack</span><span id="braces">[</span>-1<span id="braces">]</span><span id="braces">)</span> <span id="braces">{</span>
                <span id="var">$menu_str</span> .= <span id="dqStr">"---"</span>;
            <span id="braces">}</span>
        <span id="braces">}</span>

        <span id="perlKey">my</span> <span id="var">$menu_desc_str</span> = <span id="dqStr">""</span>;
        <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$m</span> <span id="braces">(</span><span id="var">@menu_desc_stack</span><span id="braces">)</span> <span id="braces">{</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$m</span> <span id="perlKey">ne</span> <span id="dqStr">""</span><span id="braces">)</span> <span id="braces">{</span>
                <span id="var">$menu_desc_str</span> .= <span id="var">$m</span>;
            <span id="braces">}</span>
            <span id="perlKey">if</span> <span id="braces">(</span><span id="var">$m</span> <span id="perlKey">ne</span> <span id="dqStr">""</span> &amp;&amp; <span id="var">$m</span> <span id="perlKey">ne</span> <span id="var">$menu_desc_stack</span><span id="braces">[</span>-1<span id="braces">]</span><span id="braces">)</span> <span id="braces">{</span>
                <span id="var">$menu_desc_str</span> .= <span id="dqStr">"---"</span>;
            <span id="braces">}</span>
        <span id="braces">}</span>

        <span id="comment">#print &quot;$menu_str : $menu_desc_str : $opt_str : $opt_group_str\n&quot;;</span><br />        <span id="comment">#SQL PREPARE HERE</span><br />
        <span id="comment">#clean HTML string</span><br />        <span id="var">$item_id</span> = <span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$item_id</span><span id="braces">)</span>;
        <span id="var">$rest_id</span> =  <span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$rest_id</span><span id="braces">)</span>;

        <span id="var">$name</span> = <span id="var">$hs</span>-&gt;<span id="method">parse</span><span id="braces">(</span><span id="method">clean</span><span id="braces">(</span><span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$name</span><span id="braces">)</span><span id="braces">)</span><span id="braces">)</span>;
        <span id="var">$hs</span>-&gt;<span id="perlFunc">eof</span>;

        <span id="var">$description</span> = <span id="var">$hs</span>-&gt;<span id="method">parse</span><span id="braces">(</span><span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$description</span><span id="braces">)</span><span id="braces">)</span>;
        <span id="var">$hs</span>-&gt;<span id="perlFunc">eof</span>;

        <span id="var">$price</span> = <span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$price</span><span id="braces">)</span>;

        <span id="var">$menu_str</span> = <span id="var">$hs</span>-&gt;<span id="method">parse</span><span id="braces">(</span><span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$menu_str</span><span id="braces">)</span><span id="braces">)</span>;
        <span id="var">$hs</span>-&gt;<span id="perlFunc">eof</span>;

        <span id="var">$menu_desc_str</span> = <span id="var">$hs</span>-&gt;<span id="method">parse</span><span id="braces">(</span><span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$menu_desc_str</span><span id="braces">)</span><span id="braces">)</span>;
        <span id="var">$hs</span>-&gt;<span id="perlFunc">eof</span>;

        <span id="comment">#execute</span><br />        <span id="perlKey">my</span> <span id="var">$rv</span> = <span id="var">$insert</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="var">$item_id</span>, <span id="var">$rest_id</span>, <span id="var">$name</span>, <span id="var">$description</span>, <span id="var">$price</span><span id="braces">)</span>;
        <span id="method">checkDB</span><span id="braces">(</span><span id="var">$rv</span>, <span id="var">$item_id</span>, <span id="dqStr">"item"</span><span id="braces">)</span>;
        <span id="var">$rv</span> = <span id="var">$insert_cat</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="var">$item_id</span>, <span id="var">$menu_str</span>, <span id="var">$menu_desc_str</span><span id="braces">)</span>;
        <span id="method">checkDB</span><span id="braces">(</span><span id="var">$rv</span>, <span id="var">$item_id</span>, <span id="dqStr">"category"</span><span id="braces">)</span>;
    <span id="braces">}</span>


    <span id="comment">#OPTION GROUP</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"option group"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@option_group_stack</span><span id="braces">)</span>;
        <span id="comment">#print &quot;$item_stack[-1]-&gt;{name} : OPTgrp: $option_group_attr-&gt;{name}\n&quot;;</span><br />    <span id="braces">}</span>


    <span id="comment">#OPTION</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$tag</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"option"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlKey">my</span> <span id="var">$option_attr</span> = <span id="perlFunc">pop</span><span id="braces">(</span><span id="var">@option_stack</span><span id="braces">)</span>;
        <span id="perlKey">my</span> <span id="var">$option_group_attr</span> = <span id="var">$option_group_stack</span><span id="braces">[</span>-1<span id="braces">]</span>;

        <span id="perlKey">my</span> <span id="var">$opt_str</span> = <span id="method">clean</span><span id="braces">(</span><span id="var">$option_attr</span>-&gt;<span id="braces">{</span>name<span id="braces">}</span><span id="braces">)</span>;
        <span id="perlKey">my</span> <span id="var">$opt_group_str</span> = <span id="method">clean</span><span id="braces">(</span><span id="var">$option_group_attr</span>-&gt;<span id="braces">{</span>name<span id="braces">}</span><span id="braces">)</span>;

        <span id="comment">#print &quot;$item_stack[-1]-&gt;{name} : OPTgrp: $opt_group_str OPT: $opt_str\n&quot;;</span><br />
        <span id="comment">#sql prep here</span><br />
        <span id="comment">#clean HTML</span><br />        <span id="var">$item_id</span> = <span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$item_id</span><span id="braces">)</span>;
        <span id="var">$opt_group_str</span> = <span id="var">$hs</span>-&gt;<span id="method">parse</span><span id="braces">(</span><span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$opt_group_str</span><span id="braces">)</span><span id="braces">)</span>;
        <span id="var">$hs</span>-&gt;<span id="perlFunc">eof</span>;

        <span id="var">$opt_str</span> = <span id="var">$hs</span>-&gt;<span id="method">parse</span><span id="braces">(</span><span id="module">HTML::Entities</span>::<span id="method">decode_entities</span><span id="braces">(</span><span id="var">$opt_str</span><span id="braces">)</span><span id="braces">)</span>;

        <span id="comment">#execute</span><br />        <span id="perlKey">my</span> <span id="var">$rv</span> = <span id="var">$insert_options</span>-&gt;<span id="method">execute</span><span id="braces">(</span><span id="dqStr">""</span>, <span id="var">$item_id</span>, <span id="var">$opt_group_str</span>, <span id="var">$opt_str</span><span id="braces">)</span>;
        <span id="method">checkDB</span><span id="braces">(</span><span id="var">$rv</span>, <span id="var">$item_id</span>, <span id="dqStr">"options"</span><span id="braces">)</span>;
    <span id="braces">}</span>

    <span id="comment">#ENTITY tag</span><br />    <span id="perlFunc">pop</span><span id="braces">(</span> <span id="var">@element_stack</span> <span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE7" id="CODE7"></a>entity_reference</td><td ><a href="#POD7">description</a></td><td ><a href="#CODE6">prev</a></td><td ><a href="#CODE8">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">entity_reference</span>
{<pre>    <span id="perlKey">my</span><span id="braces">(</span> <span id="var">$self</span>, <span id="var">$properties</span> <span id="braces">)</span> = <span id="var">@_</span>;
    <span id="method">output</span><span id="braces">(</span> <span id="dqStr">"&amp;"</span> . <span id="var">$properties</span>-&gt;<span id="braces">{</span><span id="sqStr">'Name'</span><span id="braces">}</span> . <span id="dqStr">";"</span> <span id="braces">)</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE8" id="CODE8"></a>new</td><td ><a href="#POD8">description</a></td><td ><a href="#CODE7">prev</a></td><td ><a href="#CODE9">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">new</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$type</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">return</span> <span id="perlFunc">bless</span> <span id="braces">{</span><span id="braces">}</span>, <span id="var">$type</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE9" id="CODE9"></a>output</td><td ><a href="#POD9">description</a></td><td ><a href="#CODE8">prev</a></td><td ><a href="#CODE10">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">output</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$string</span> = <span id="perlFunc">shift</span>;
    <span id="perlFunc">print</span> <span id="var">$string</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE10" id="CODE10"></a>processing_instruction</td><td ><a href="#POD10">description</a></td><td ><a href="#CODE9">prev</a></td><td ><a href="#CODE11">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">processing_instruction</span>
{<pre>  <span id="comment"># do nothing!</span><br /></pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE11" id="CODE11"></a>stack_contains</td><td ><a href="#POD11">description</a></td><td ><a href="#CODE10">prev</a></td><td ><a href="#CODE12">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">stack_contains</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$guess</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">@stack</span> = <span id="perlFunc">shift</span>;

    <span id="perlKey">foreach</span><span id="braces">(</span> <span id="var">@stack</span> <span id="braces">)</span> <span id="braces">{</span>
        <span id="perlKey">return</span> 1 <span id="perlKey">if</span><span id="braces">(</span> <span id="var">$_</span> <span id="perlKey">eq</span> <span id="var">$guess</span> <span id="braces">)</span>;
    <span id="braces">}</span>
    <span id="perlKey">return</span> 0;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE12" id="CODE12"></a>stack_top</td><td ><a href="#POD12">description</a></td><td ><a href="#CODE11">prev</a></td><td ><a href="#CODE13">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">stack_top</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$guess</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">@stack</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">return</span> <span id="var">$stack</span><span id="braces">[</span> $#stack <span id="braces">]</span> <span id="perlKey">eq</span> <span id="var">$guess</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE13" id="CODE13"></a>start_element</td><td ><a href="#POD13">description</a></td><td ><a href="#CODE12">prev</a></td><td >next</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">start_element</span>
{<pre>    <span id="perlKey">my</span><span id="braces">(</span> <span id="var">$self</span>, <span id="var">$properties</span> <span id="braces">)</span> = <span id="var">@_</span>;
    <span id="comment"># note: the hash %{$properties} will lose attribute order</span><br />
    <span id="comment"># close internal subset if still open</span><br />    <span id="method">output</span><span id="braces">(</span> <span id="dqStr">"]&gt;\n"</span> <span id="braces">)</span> <span id="perlKey">if</span><span id="braces">(</span> <span id="var">$in_intset</span> <span id="braces">)</span>;
    <span id="var">$in_intset</span> = 0;

    <span id="comment"># remember the name by pushing onto the stack</span><br />    <span id="perlFunc">push</span><span id="braces">(</span> <span id="var">@element_stack</span>, <span id="var">$properties</span>-&gt;<span id="braces">{</span><span id="sqStr">'Name'</span><span id="braces">}</span> <span id="braces">)</span>;

    <span id="comment">#ATTRIBUTE per tag (INFO)</span><br />    <span id="perlKey">my</span> <span id="var">%attributes</span> = %<span id="braces">{</span><span id="var">$properties</span>-&gt;<span id="braces">{</span><span id="sqStr">'Attributes'</span><span id="braces">}</span><span id="braces">}</span>;
    <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@tag_stack</span>, <span id="braces">{</span><span id="var">%attributes</span><span id="braces">}</span><span id="braces">)</span>;


    <span id="comment">#==ACTION CASES==</span><br />
    <span id="comment">#MENU</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"menu"</span><span id="braces">)</span> <span id="braces">{</span>

        <span id="comment">#NAME</span><br />        <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@menu_stack</span>, <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"name"</span><span id="braces">}</span><span id="braces">)</span>;

        <span id="comment">#DESCRIPTION (often optional arg)</span><br />        <span id="perlKey">if</span> <span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"description"</span><span id="braces">}</span><span id="braces">)</span> <span id="braces">{</span>
            <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@menu_desc_stack</span>, <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"description"</span><span id="braces">}</span><span id="braces">)</span>;
        <span id="braces">}</span>
        <span id="perlKey">else</span> <span id="braces">{</span>
            <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@menu_desc_stack</span>, <span id="dqStr">""</span><span id="braces">)</span>;
        <span id="braces">}</span>

    <span id="braces">}</span>
    <span id="comment">#ITEM</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"item"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@item_stack</span>, <span id="braces">{</span><span id="var">%attributes</span><span id="braces">}</span><span id="braces">)</span>;
        ++<span id="var">$item_id</span>;
    <span id="braces">}</span>

    <span id="comment">#OPT GROUP</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"option group"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@option_group_stack</span>, <span id="braces">{</span><span id="var">%attributes</span><span id="braces">}</span><span id="braces">)</span>;
    <span id="braces">}</span>

    <span id="comment">#OPTION</span><br />    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> &amp;&amp; <span id="var">$attributes</span><span id="braces">{</span><span id="dqStr">"type"</span><span id="braces">}</span> <span id="perlKey">eq</span> <span id="dqStr">"option"</span><span id="braces">)</span> <span id="braces">{</span>
        <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@option_stack</span>, <span id="braces">{</span><span id="var">%attributes</span><span id="braces">}</span><span id="braces">)</span>;
    <span id="braces">}</span></pre>}</td></div>
<div id="sep"></div>
<a name="General" id="General"></a>
<div id="mainTitle">General documentation</div>
<div id="sep"></div>
<b>No general documentation available.</b><br />
</body>
</html>

<head>
<!-- Generated by perlmod2www.pl -->
<title>
Util documentation.
</title>
<link rel="stylesheet" type="text/css" href="../perl.css">
</head>
<body bgcolor="white">
<span id="modRootPath">crawl</span>
<span id="modName">Util</span>
<div id="sep"></div>
<a name="TOP" id="TOP"></a>
<table id="daArea" width="100%"><tr><td id="daEntry" ><a href="#vardefs">Package variables</a></td><td id="daEntry" ><a href="#General">General documentation</a></td><td id="daEntry" ><a href="#Methods">Methods</a></td></tr></table>
<div id="sep"></div>
<a name="vardefs" id="vardefs"></a><div id="descTitle">Package variables</div>
<div id="descArea"><div id="libEntry">No package variables defined.</div>
</div>
<div id="sep"></div>
<div id="descTitle">Included modules</div>
<div id="descArea"><div id="libEntry"><span id="use">Data::Dumper</span> </div>
<div id="libEntry"><span id="use">Stem</span></div>
<div id="libEntry"><span id="use">URI::URL</span> </div>
<div id="libEntry"><span id="use">WWW::Curl::Easy</span> </div>
<div id="libEntry"><span id="use">XML::Simple</span> </div>
</div>
<div id="sep"></div>
<a name="SYNOPSIS" id="SYNOPSIS"></a>
<div id="descTitle">Synopsis</div>
<div id="error">No synopsis!</div>
<div id="sep"></div>
<a name="DESCRIPTION" id="DESCRIPTION"></a>
<div id="descTitle">Description</div>
<div id="error">No description!</div>
<div id="sep"></div>
<a name="Methods" id="Methods"></a>
<div id="descTitle">Methods</div>
<table id="methIndArea" width="100%" cellspacing="0"><tr><td id="methIndEntry">Get</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE1">Code</a></td></tr>
<tr><td id="methIndEntry">clean</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE2">Code</a></td></tr>
<tr><td id="methIndEntry">getFilesDir</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE3">Code</a></td></tr>
<tr><td id="methIndEntry">loadStopWords</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE4">Code</a></td></tr>
<tr><td id="methIndEntry">split_words</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE5">Code</a></td></tr>
<tr><td id="methIndEntry">split_words2</td><td id="methIndEntry"><div id="error">No description</div></td><td id="methIndEntry"><a href="#CODE6">Code</a></td></tr>
</table>
<div id="sep"></div>
<a name="MethDesc" id="MethDesc"></a>
<div id="mainTitle">Methods description</div>
<div id="sep"></div>
<div id="error">None available.</div>
<div id="sep"></div>
<a name="MethCode" id="MethCode"></a>
<div id="mainTitle">Methods code</div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE1" id="CODE1"></a>Get</td><td >description</td><td >prev</td><td ><a href="#CODE2">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">Get</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$var</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">if</span><span id="braces">(</span><span id="perlFunc">defined</span> <span id="var">$var</span><span id="braces">)</span> <span id="braces">{</span>
	<span id="perlKey">return</span> <span id="var">$var</span>
    <span id="braces">}</span>
    <span id="perlKey">return</span> <span id="dqStr">""</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE2" id="CODE2"></a>clean</td><td >description</td><td ><a href="#CODE1">prev</a></td><td ><a href="#CODE3">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">clean</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$stemmer</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">$word</span> = <span id="perlFunc">shift</span>;

    <span id="perlKey">my</span> <span id="var">@words</span>;

    <span id="comment">#strip punctuation, split words</span><br />    <span id="perlKey">my</span> <span id="var">@split_words</span> = <span id="method">split_words2</span><span id="braces">(</span><span id="var">$word</span>, 1<span id="braces">)</span>;
    
    <span id="comment">#stem &amp; lowercase</span><br />    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$w</span> <span id="braces">(</span><span id="var">@split_words</span><span id="braces">)</span> <span id="braces">{</span>
	<span id="perlFunc">push</span><span id="braces">(</span><span id="var">@words</span>, <span id="perlFunc">lc</span> $<span id="braces">{</span><span id="var">$stemmer</span><span id="braces">}</span>-&gt;<span id="method">stem</span><span id="braces">(</span><span id="var">$w</span><span id="braces">)</span><span id="braces">)</span>;
    <span id="braces">}</span>

    <span id="comment">#lowercase</span><br />    <span id="perlKey">return</span> <span id="var">@words</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE3" id="CODE3"></a>getFilesDir</td><td >description</td><td ><a href="#CODE2">prev</a></td><td ><a href="#CODE4">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">getFilesDir</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$input_dir</span> = <span id="perlFunc">shift</span>;

<span id="comment">#get files in directory</span><br />    <span id="perlFunc">opendir</span><span id="braces">(</span>DIR, <span id="var">$input_dir</span><span id="braces">)</span> || <span id="perlFunc">die</span><span id="braces">(</span><span id="dqStr">"Error opening directory"</span><span id="braces">)</span>;
    <span id="perlKey">my</span> <span id="var">@files</span> = <span id="perlFunc">readdir</span><span id="braces">(</span>DIR<span id="braces">)</span>;
    <span id="perlFunc">closedir</span><span id="braces">(</span>DIR<span id="braces">)</span>;

<span id="comment">#remove .. and .</span><br />    <span id="perlKey">my</span> <span id="var">@pruned_files</span> = <span id="braces">(</span><span id="braces">)</span>;
    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$f</span> <span id="braces">(</span><span id="var">@files</span><span id="braces">)</span> <span id="braces">{</span>
	<span id="perlKey">unless</span> <span id="braces">(</span> <span id="braces">(</span><span id="var">$f</span> <span id="perlKey">eq</span> <span id="dqStr">"."</span><span id="braces">)</span> || <span id="braces">(</span><span id="var">$f</span> <span id="perlKey">eq</span> <span id="dqStr">".."</span><span id="braces">)</span><span id="braces">)</span> <span id="braces">{</span>
	    <span id="perlFunc">push</span><span id="braces">(</span><span id="var">@pruned_files</span>, <span id="var">$f</span><span id="braces">)</span>;
	<span id="braces">}</span>

    <span id="braces">}</span>
    <span id="perlKey">return</span> <span id="var">@pruned_files</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE4" id="CODE4"></a>loadStopWords</td><td >description</td><td ><a href="#CODE3">prev</a></td><td ><a href="#CODE5">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">loadStopWords</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$filename</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">%stop_hash</span> =<span id="braces">(</span><span id="braces">)</span>;

    <span id="perlFunc">open</span> FILE, <span id="dqStr">"<span id="var">$filename</span>"</span>  or <span id="perlFunc">die</span> <span id="braces">(</span><span id="dqStr">"Error opening stopwords file"</span><span id="braces">)</span>;    
    <span id="perlKey">my</span> <span id="var">@words</span> = &lt;FILE&gt;;
    <span id="perlFunc">close</span><span id="braces">(</span>FILE<span id="braces">)</span>;
    
    <span id="perlFunc">chomp</span><span id="braces">(</span><span id="var">@words</span><span id="braces">)</span>;

    <span id="perlKey">foreach</span> <span id="perlKey">my</span> <span id="var">$w</span> <span id="braces">(</span><span id="var">@words</span><span id="braces">)</span> <span id="braces">{</span>
	
	<span id="var">$stop_hash</span><span id="braces">{</span><span id="var">$w</span><span id="braces">}</span> = 1;
    <span id="braces">}</span>

    <span id="perlKey">return</span>\% stop_hash;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE5" id="CODE5"></a>split_words</td><td >description</td><td ><a href="#CODE4">prev</a></td><td ><a href="#CODE6">next</a></td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">split_words</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$text</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">$punc</span> = <span id="perlFunc">shift</span>;

    <span id="perlKey">if</span><span id="braces">(</span> <span id="var">$punc</span> <span id="braces">)</span><span id="braces">{</span>
	<span id="var">$text</span> =~ <span id="regExp">s/^M/ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/(\w)\'(\w)/</span><span id="var">$1</span><span id="regExp">~</span><span id="var">$2</span><span id="regExp">/g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/[\\\/]/</span>/g;<br />      <span id="var">$text</span> =~ <span id="regExp">s/\./ p_period\ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\'/ p_apostrophe\ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\,/ p_comma\ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\?/ p_question\ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\!/ p_exclamation\ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\;/ p_semicolon\ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\:/ p_colon\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\&quot;/ p_dblquote\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\*/ p_star\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\(/ p_Lparen\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\)/ p_Rparen\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\[/ p_Lbracket\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\]/ p_Rbracket\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\{/ p_Lbrace\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\}/ p_Rbrace\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\}/ p_Rbrace\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\|/ p_pipe\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\&amp;/ p_amperand\ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\@/ p_at\ /g</span>;
      <span id="comment">#$text =~ s/([',.!?;:&quot;\*\(\)\[\]])/\ $1\ /g;</span><br />    <span id="braces">}</span><span id="perlKey">else</span><span id="braces">{</span>
      <span id="var">$text</span> =~ <span id="regExp">s/[^A-Za-z\']/ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/(\w)\'(\w)/</span><span id="var">$1</span><span id="regExp">~</span><span id="var">$2</span><span id="regExp">/g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\'/ /g</span>;
    <span id="braces">}</span>
    <span id="perlKey">my</span> <span id="var">@words</span> = <span id="perlFunc">split</span> <span id="regExp">/\s+/</span>, <span id="var">$text</span>;

    <span id="perlKey">return</span> <span id="var">@words</span>;</pre>}</td></div>
<div id="sep"></div>
<table id="methCodeTitle" width="100%"><tr><td width="200"><a name="CODE6" id="CODE6"></a>split_words2</td><td >description</td><td ><a href="#CODE5">prev</a></td><td >next</td><td align="right"><a href="#TOP">Top</a></td></tr></table>
<div id="methCodeArea"><td ><span id="sub">sub</span> <span id="subName">split_words2</span>
{<pre>    <span id="perlKey">my</span> <span id="var">$text</span> = <span id="perlFunc">shift</span>;
    <span id="perlKey">my</span> <span id="var">$punc</span> = <span id="perlFunc">shift</span>;

    <span id="perlKey">if</span><span id="braces">(</span> <span id="var">$punc</span> <span id="braces">)</span><span id="braces">{</span>
        <span id="var">$text</span> =~ <span id="regExp">s/\^M/ /g</span>;
	<span id="comment">#$text =~ s/(\w)\'(\w)/$1~$2/g;</span><br />	<span id="var">$text</span> =~ <span id="regExp">s/(\w)\'(\w)/</span><span id="var">$1</span><span id="regExp">/g</span>;
	<span id="comment">#additions to take out html specific characters</span><br />	<span id="comment">#replaced w/ HTML::Entities in parsing</span><br />        <span id="comment">#$text =~ s/\&amp;amp;/ /g;</span><br />        <span id="comment">#$text =~ s/quot\;/ /g;</span><br />	<span id="comment">#$text =~ s/ltbrgt+/ /g;</span><br />	<span id="var">$text</span> =~ <span id="regExp">s/[0-9]*//g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\#//g</span>;

	<span id="var">$text</span> =~ <span id="regExp">s/[\\\/]/</span>/g;<br />	<span id="var">$text</span> =~ <span id="regExp">s/\./ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\'//g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\,/ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\?/ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\!/ /g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\;//g</span>;
	<span id="var">$text</span> =~ <span id="regExp">s/\://g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\&quot;//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\*//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\(//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\)//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\[//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\]//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\{//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\}//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\}//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\|//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\&amp;//g</span>;
        <span id="var">$text</span> =~ <span id="regExp">s/\@//g</span>;


      <span id="comment">#$text =~ s/([',.!?;:&quot;\*\(\)\[\]])/\ $1\ /g;</span><br />    <span id="braces">}</span><span id="perlKey">else</span><span id="braces">{</span>
      <span id="var">$text</span> =~ <span id="regExp">s/[^A-Za-z\']/ /g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/(\w)\'(\w)/</span><span id="var">$1</span><span id="regExp">~</span><span id="var">$2</span><span id="regExp">/g</span>;
      <span id="var">$text</span> =~ <span id="regExp">s/\'/ /g</span>;
    <span id="braces">}</span>
    <span id="perlKey">my</span> <span id="var">@words</span> = <span id="perlFunc">split</span> <span id="regExp">/\s+/</span>, <span id="var">$text</span>;

    <span id="perlKey">return</span> <span id="var">@words</span>;</pre>}</td></div>
<div id="sep"></div>
<a name="General" id="General"></a>
<div id="mainTitle">General documentation</div>
<div id="sep"></div>
<b>No general documentation available.</b><br />
</body>
</html>
